<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>æ¾³é–€æ°£è±¡ä¸­å¿ƒ | ç†±å¸¶æ°£æ—‹è·¯å¾‘åœ°åœ–</title>
    <link rel="icon" href="mmclogo.jpg" type="image/jpeg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100vh; overflow: hidden; font-family: "Microsoft JhengHei", "PingFang TC", sans-serif; }
        
        header { 
            position: absolute; 
            top: 0; 
            left: 0; 
            right: 0; 
            z-index: 1000; 
            background: rgba(255,255,255,0.8); 
            backdrop-filter: blur(4px);
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #0066CC;
            font-weight: bold;
            font-size: 16px;
        }
        
        .logo img { width: 32px; height: 32px; border-radius: 4px; }
        
        #typhoonMap { 
            width: 100vw; 
            height: 100vh; 
            z-index: 1;
        }
        
        .tc-popup { 
            font-size: 12px; 
            min-width: 180px;
        }
        
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 999;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 4px;
            font-size: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 4px 0;
        }
        
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid #000;
        }
        
        .legend-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
        }
        
        .legend-dashed-line {
            width: 20px;
            height: 2px;
            margin-right: 8px;
            background: linear-gradient(to right, #E60012 0%, #E60012 40%, transparent 40%, transparent 100%);
            background-size: 6px 2px;
        }

        .no-tc-notice {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 998;
            background: rgba(255,255,255,0.95);
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            text-align: center;
            font-size: 16px;
            color: #333;
        }

        .leaflet-control-zoom {
            top: 80px !important;
        }

        .tc-selector {
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background: #fff;
            font-size: 14px;
        }

        /* ========== ä¼˜åŒ–ï¼šåˆå¹¶ä¿¡æ¯é¢æ¿ï¼Œé¿å…é®æŒ¡ ========== */
        #infoPanel {
            position: absolute;
            top: 60px;
            right: 20px;
            z-index: 999;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: 14px;
            min-width: 200px;
        }
        .info-section {
            margin-bottom: 8px;
        }
        .info-section:last-child {
            margin-bottom: 0;
        }
        .info-title {
            font-weight:bold; 
            color:#0066CC; 
            margin-bottom:3px;
            font-size: 13px;
        }
        .info-content {
            font-size: 13px;
        }
        .highlight-text {
            color: #E60012; 
            font-weight:bold;
        }
        .time-text {
            color: #0066CC; 
            font-weight:bold;
        }

        /* ========== ä»…æ–°å¢ï¼šå°é£å›¾æ ‡æ—‹è½¬åŠ¨ç”» ========== */
        @keyframes typhoonRotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        .typhoon-marker-wrapper {
            position: relative;
            width: 20px;
            height: 20px;
        }
        .typhoon-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            border-radius: 50%;
            border: 1px solid #000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: typhoonRotate 5s linear infinite;
            transform: translate(-50%, -50%);
        }
        .typhoon-dot.current {
            box-shadow: 0 0 8px rgba(230, 0, 18, 0.8);
        }
        /* ========== æ–°å¢ç»“æŸ ========== */
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="mmclogo.jpg" alt="æ¾³é–€æ°£è±¡ä¸­å¿ƒ">
            <span>æ¾³é–€æ°£è±¡ä¸­å¿ƒ | ç†±å¸¶æ°£æ—‹è·¯å¾‘åœ°åœ–</span>
        </div>
        <select id="tcSelector" class="tc-selector">
            <option value="">-- è«‹é¸æ“‡ç†±å¸¶æ°£æ—‹ --</option>
            <option value="A" selected>NAMELESS</option>
            <!--<option value="B">ç†±å¸¶æ°£æ—‹B</option>-->
        </select>
    </header>

    <div id="typhoonMap"></div>

    <!-- åœ–ä¾‹é¢æ¿ -->
    <div class="legend">
        <div class="legend-item">
            <div class="legend-dot" style="background: #BDBDBD;"></div>
            <span>ä½å£“å€</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #FFF176;"></div>
            <span>ç†±å¸¶ä½æ°£å£“</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #64B5F6;"></div>
            <span>ç†±å¸¶é¢¨æš´</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #4CAF50;"></div>
            <span>å¼·çƒˆç†±å¸¶é¢¨æš´</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #FFB74D;"></div>
            <span>é¢±é¢¨</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #FF7043;"></div>
            <span>å¼·é¢±é¢¨</span>
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background: #BA68C8;"></div>
            <span>è¶…å¼·é¢±é¢¨</span>
        </div>
        <div class="legend-item">
            <div class="legend-line" style="background: #000;"></div>
            <span>éå»è·¯å¾‘</span>
        </div>
        <div class="legend-item">
            <div class="legend-dashed-line"></div>
            <span>é å ±è·¯å¾‘</span>
        </div>
    </div>

    <!-- ä¼˜åŒ–ï¼šåˆå¹¶è·ç¦»å’Œé¢„æŠ¥æ—¶é—´é¢æ¿ï¼Œå‡å°‘é®æŒ¡ -->
    <div id="infoPanel">
        <!-- è·ç¦»ä¿¡æ¯éƒ¨åˆ† -->
        <div class="info-section">
            <div class="info-title">ğŸ“ è·é›¢è³‡è¨Š</div>
            <div id="distanceInfo" class="info-content">åŠ è¼‰ä¸­...</div>
        </div>
        <!-- é¢„æŠ¥æ—¶é—´éƒ¨åˆ† -->
        <div class="info-section">
            <div class="info-title">ğŸ“… é å ±åŸºæº–æ™‚é–“</div>
            <div id="forecastTimeInfo" class="info-content">åŠ è¼‰ä¸­...</div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡æå‰å£°æ˜ï¼Œç¡®ä¿è·¨è„šæœ¬è®¿é—®
        let map, tcPathDataA, tcPathDataB, showTC;

        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–åœ°åœ–
            map = L.map('typhoonMap').setView([21.5, 114.5], 7);
            
            L.tileLayer('https://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}', {
                subdomains: ['1', '2', '3', '4'],
                attribution: 'Â© é«˜å¾·åœ°åœ–'
            }).addTo(map);

            // æ¾³é–€æ¨™è¨˜
            L.marker([22.156, 113.574], {
                icon: L.divIcon({
                    html: '<div style="width:18px;height:18px;border-radius:50%;background:#0066CC;border:1px solid #000;color:white;font-size:8px;font-weight:bold;display:flex;align-items:center;justify-content:center;">MO</div>',
                    className: '',
                    iconSize: [18, 18]
                })
            }).addTo(map).bindPopup(`
                <div class="tc-popup">
                    <div style="font-weight:bold;">æ¾³é–€</div>
                    <div>22.1987Â°N, 113.5439Â°E</div>
                </div>
            `);

            // å¼·åº¦åˆ¤æ–·å‡½æ•¸
            const getTcLevelBySpeed = (speed) => {
                if (speed <= 40) return { level: 0, name: 'ä½å£“å€', color: '#BDBDBD' };
                if (speed <= 62) return { level: 1, name: 'ç†±å¸¶ä½æ°£å£“', color: '#FFF176' };
                if (speed <= 87) return { level: 2, name: 'ç†±å¸¶é¢¨æš´', color: '#64B5F6' };
                if (speed <= 117) return { level: 3, name: 'å¼·çƒˆç†±å¸¶é¢¨æš´', color: '#4CAF50' };
                if (speed <= 149) return { level: 4, name: 'é¢±é¢¨', color: '#FFB74D' };
                if (speed <= 184) return { level: 5, name: 'å¼·é¢±é¢¨', color: '#FF7043' };
                return { level: 6, name: 'è¶…å¼·é¢±é¢¨', color: '#BA68C8' };
            };

            // è·¯å¾‘ç¹ªè£½å‡½æ•¸
            const drawTcPath = (tcData, tcName) => {
                const layers = [];
                const currentIdx = tcData.findIndex(p => p.type === "current");
                if (currentIdx === -1) return layers;

                const pastPoints = tcData.slice(0, currentIdx + 1).map(p => [p.lat, p.lng]);
                const forecastPoints = tcData.slice(currentIdx).map(p => [p.lat, p.lng]);

                // éå»è·¯å¾‘
                const pastLine = L.polyline(pastPoints, {
                    color: '#000',
                    weight: 4,
                    opacity: 0.8,
                    lineCap: 'round'
                });
                layers.push(pastLine);

                // é å ±è·¯å¾‘
                const forecastLine = L.polyline(forecastPoints, {
                    color: '#E60012',
                    weight: 4,
                    opacity: 0.8,
                    dashArray: '4,8',
                    lineCap: 'round'
                });
                layers.push(forecastLine);

                // æ¨™è¨˜ç¹ªè£½ï¼ˆä»…ä¿®æ”¹è¿™é‡Œçš„å›¾æ ‡æ¸²æŸ“ï¼Œä¿ç•™å…¶ä»–é€»è¾‘ï¼‰
                tcData.forEach((point, index) => {
                    const tcInfo = getTcLevelBySpeed(point.speed);
                    const isCurrent = point.type === "current";
                    const size = isCurrent ? 16 : 12; // ç¨å¾®æ”¾å¤§å›¾æ ‡ï¼Œè®©è§†è§‰æ›´æ˜æ˜¾

                    // ========== ä»…ä¿®æ”¹ï¼šé‡æ„å°é£å›¾æ ‡HTMLï¼Œæ·»åŠ æ—‹è½¬ ==========
                    const markerHtml = `
                        <div class="typhoon-marker-wrapper">
                            <div class="typhoon-dot ${isCurrent ? 'current' : ''}" 
                                 style="width: ${size}px; height: ${size}px; background: ${tcInfo.color};">
                            </div>
                        </div>
                    `;
                    // ========== ä¿®æ”¹ç»“æŸ ==========

                    const marker = L.marker([point.lat, point.lng], {
                        icon: L.divIcon({
                            html: markerHtml.trim(),
                            className: '',
                            iconSize: [20, 20] // å¯¹åº”å¤–å±‚wrapperå°ºå¯¸
                        })
                    });

                    let timeLabel = '';
                    if (isCurrent) {
                        timeLabel = `<div style="font-weight:bold;color:#E60012;">${tcName} - ç›®å‰æ™‚é–“ï¼š${point.time}</div>`;
                    } else if (point.type === "forecast") {
                        const hoursText = point.hours ? ` (é å ±${point.hours}å°æ™‚)` : '';
                        timeLabel = `<div style="font-weight:bold;color:#E60012;">${tcName} - é å ±æ™‚é–“ï¼š${point.time}${hoursText}</div>`;
                    } else {
                        timeLabel = `<div style="font-weight:bold;">${tcName} - ${point.time}</div>`;
                    }

                    let hoursPopup = '';
                    if (point.type === "forecast" && point.hours) {
                        hoursPopup = `<div>é å ±æ™‚é•·ï¼š${point.hours} å°æ™‚</div>`;
                    }

                    // æå‰è®¡ç®—è·ç¦»å¹¶åŠ å…¥å¼¹çª—
                    const macauLat = 22.1987;
                    const macauLng = 113.5439;
                    const distance = calculateDistance(macauLat, macauLng, point.lat, point.lng);

                    marker.bindPopup(`
                        <div class="tc-popup">
                            ${timeLabel}
                            <div>å¼·åº¦ï¼š${tcInfo.name} (${point.speed} km/h)</div>
                            <div>æ°£å£“ï¼š${point.pressure} hPa</div>
                            <div>ä½ç½®ï¼š${point.lat}Â°N, ${point.lng}Â°E</div>
                            <div>è·æ¾³é–€ï¼š${distance} å…¬é‡Œ</div>
                            ${hoursPopup}
                        </div>
                    `.trim());

                    layers.push(marker);
                });

                return layers;
            };

            // æ¾³é–€ç¯„åœåœ“
            const drawMacauMultipleCircles = () => {
                const macauLat = 22.1987;
                const macauLng = 113.5439;
                const circles = [
                    { radiusKm: 800, color: '#FF0000', fillOpacity: 0.01 },
                    { radiusKm: 400, color: '#000000', fillOpacity: 0.01 },
                    { radiusKm: 200, color: '#000000', fillOpacity: 0.01 },
                    { radiusKm: 100, color: '#000000', fillOpacity: 0.01 }
                ];

                circles.forEach(c => {
                    L.circle([macauLat, macauLng], {
                        radius: c.radiusKm * 1000,
                        color: c.color,
                        weight: 1,
                        opacity: 0.8,
                        fillColor: c.color,
                        fillOpacity: c.fillOpacity
                    }).addTo(map).bindPopup(`
                        <div class="tc-popup">
                            <div style="font-weight:bold;">æ¾³é–€${c.radiusKm}å…¬é‡Œç¯„åœ</div>
                            <div>åŠå¾‘ï¼š${c.radiusKm}å…¬é‡Œ</div>
                        </div>
                    `);
                });
            };

            // è·ç¦»è®¡ç®—æ ¸å¿ƒå‡½æ•°ï¼ˆæå‰å®šä¹‰ï¼‰
            window.calculateDistance = function(lat1, lon1, lat2, lon2) {
                const R = 6371; // åœ°çƒåŠå¾„(å…¬é‡Œ)
                const dLat = (lat2 - lat1) * Math.PI / 180;
                const dLon = (lon2 - lon1) * Math.PI / 180;
                const a = 
                    Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                    Math.sin(dLon/2) * Math.sin(dLon/2); 
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
                const distance = R * c;
                return Math.round(distance);
            };

            drawMacauMultipleCircles();

            // ç†±å¸¶æ°£æ—‹Aæ•¸æ“š
            tcPathDataA = [
                //éå»æ•¸æ“š+ç¾æ™‚æ•¸æ“š//
                {"lat": 9.4, "lng": 131.1, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥08æ™‚", "type": "past"},
                {"lat": 9.4, "lng": 131.0, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥11æ™‚", "type": "past"},
                {"lat": 9.3, "lng": 130.8, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥14æ™‚", "type": "past"},
                {"lat": 9.0, "lng": 130.8, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥17æ™‚", "type": "past"},
                {"lat": 9.1, "lng": 130.7, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥20æ™‚", "type": "past"},
                {"lat": 9.3, "lng": 130.4, "speed": 55, "pressure": 1002, "time": "01æœˆ14æ—¥23æ™‚", "type": "current"},
                //é å ±å†…å®¹//
                {"lat": 10.0, "lng": 129.5, "speed": 65, "pressure": 1000, "time": "01æœˆ15æ—¥11æ™‚", "type": "forecast", "hours": 12},
                {"lat": 11.0, "lng": 128.0, "speed": 65, "pressure": 998, "time": "01æœˆ15æ—¥23æ™‚", "type": "forecast", "hours": 24},
                {"lat": 11.6, "lng": 127.5, "speed": 75, "pressure": 995, "time": "01æœˆ16æ—¥11æ™‚", "type": "forecast", "hours": 36},
                {"lat": 12.6, "lng": 126.8, "speed": 75, "pressure": 995 , "time": "01æœˆ16æ—¥23æ™‚", "type": "forecast", "hours": 48},
                {"lat": 14.0, "lng": 126.0, "speed": 85, "pressure": 990 , "time": "01æœˆ17æ—¥23æ™‚", "type": "forecast", "hours": 72},
                {"lat": 15.5, "lng": 126.0, "speed": 75, "pressure": 995 , "time": "01æœˆ18æ—¥23æ™‚", "type": "forecast", "hours": 96},
                {"lat": 17.0, "lng": 127.0, "speed": 65, "pressure": 998 , "time": "01æœˆ19æ—¥23æ™‚", "type": "forecast", "hours": 120},
            ];

            // ç†±å¸¶æ°£æ—‹Bæ•¸æ“š
            /*tcPathDataB = [
                { lat: 24.0, lng: 146.5, speed: 45, pressure: 1004, time: "08æœˆ11æ—¥17:00", type: "past" },
                { lat: 24.5, lng: 146.0, speed: 55, pressure: 1002, time: "08æœˆ11æ—¥20:00", type: "past" },
                { lat: 25.5, lng: 145.5, speed: 65, pressure: 998, time: "08æœˆ11æ—¥23:00", type: "past" },
                { lat: 26.5, lng: 145.0, speed: 65, pressure: 998, time: "08æœˆ12æ—¥02:00", type: "past" },
                { lat: 26.4, lng: 144.5, speed: 75, pressure: 995, time: "08æœˆ12æ—¥05:00", type: "past" },
                { lat: 26.2, lng: 144.0, speed: 75, pressure: 995, time: "08æœˆ12æ—¥08:00", type: "past" },
                { lat: 26.1, lng: 143.5, speed: 85, pressure: 990, time: "08æœˆ12æ—¥11:00", type: "current" },
                { lat: 27.0, lng: 141.5, speed: 120, pressure: 975, time: "08æœˆ12æ—¥23:00", type: "forecast", "hours": 12 },
                { lat: 27.5, lng: 139.5, speed: 145, pressure: 960, time: "08æœˆ13æ—¥11:00", type: "forecast", "hours": 24 },
                { lat: 28.0, lng: 135.0, speed: 165, pressure: 948, time: "08æœˆ13æ—¥23:00", type: "forecast", "hours": 36 },
                { lat: 27.8, lng: 130.5, speed: 185, pressure: 935, time: "08æœˆ14æ—¥11:00", type: "forecast", "hours": 48 },
                { lat: 26.8, lng: 125.0, speed: 175, pressure: 938, time: "08æœˆ15æ—¥11:00", type: "forecast", "hours": 72 },
                { lat: 25.7, lng: 120.5, speed: 185, pressure: 935, time: "08æœˆ16æ—¥11:00", type: "forecast", "hours": 96 },
                { lat: 22.8, lng: 116.5, speed: 175, pressure: 940, time: "08æœˆ17æ—¥11:00", type: "forecast", "hours": 120 }
            ];*/

            // æ–°å¢ï¼šæ›´æ–°é¢„æŠ¥åŸºå‡†æ—¶é—´é¢æ¿å‡½æ•°
            window.updateForecastTimePanel = function(v) {
                const forecastTimeInfo = document.getElementById('forecastTimeInfo');
                
                if (v === 'A') {
                    const currentPoint = tcPathDataA.find(p => p.type === "current");
                    if (currentPoint) {
                        // æ‹¼æ¥å®Œæ•´å¹´ä»½æ˜¾ç¤º
                        forecastTimeInfo.innerHTML = `
                            <div>NAMELESS</div>
                            <div class="time-text">2026å¹´${currentPoint.time}</div>
                        `;
                    } else {
                        forecastTimeInfo.textContent = 'æœªæ‰¾åˆ°é å ±åŸºæº–æ™‚é–“';
                    }
                } else if (v === 'B') {
                    const currentPoint = tcPathDataB.find(p => p.type === "current");
                    if (currentPoint) {
                        forecastTimeInfo.innerHTML = `
                            <div>ç†±å¸¶æ°£æ—‹B</div>
                            <div class="time-text">2026å¹´${currentPoint.time}</div>
                        `;
                    } else {
                        forecastTimeInfo.textContent = 'æœªæ‰¾åˆ°é å ±åŸºæº–æ™‚é–“';
                    }
                } else {
                    forecastTimeInfo.textContent = 'è«‹é¸æ“‡ç†±å¸¶æ°£æ—‹æŸ¥çœ‹é å ±æ™‚é–“';
                }
            };

            // æ ¸å¿ƒåˆ‡æ¢é€»è¾‘ï¼ˆå…¨å±€å‡½æ•°ï¼‰
            showTC = function(v) {
                // å…ˆæ¸…ç©ºæ‰€æœ‰èˆŠå±¤
                if (window.currentLayers) {
                    window.currentLayers.forEach(l => map.removeLayer(l));
                }
                window.currentLayers = [];
                let allPoints = [];

                // æ›´æ–°è·ç¦»é¢æ¿
                updateDistancePanel(v);
                // æ–°å¢ï¼šæ›´æ–°é¢„æŠ¥åŸºå‡†æ—¶é—´é¢æ¿
                updateForecastTimePanel(v);

                // é¸ä¸­Aï¼šç¹ªè£½Açš„æ•¸æ“š
                if (v === 'A') {
                    const lyrA = drawTcPath(tcPathDataA, 'NAMELESS');
                    window.currentLayers.push(...lyrA);
                    allPoints.push(...tcPathDataA.map(p => [p.lat, p.lng]));
                }
                // é¸ä¸­Bï¼šç¹ªè£½Bçš„æ•¸æ“š
                if (v === 'B') {
                    const lyrB = drawTcPath(tcPathDataB, 'ç†±å¸¶æ°£æ—‹B');
                    window.currentLayers.push(...lyrB);
                    allPoints.push(...tcPathDataB.map(p => [p.lat, p.lng]));
                }

                // æ·»åŠ æ–°å±¤ï¼ˆå¦‚æœæœ‰ï¼‰
                window.currentLayers.forEach(l => map.addLayer(l));
                
                // åªæœ‰æœ‰é»çš„æ™‚å€™æ‰èª¿æ•´è¦–åœ–
                if (allPoints.length > 0) {
                    map.fitBounds(L.polyline(allPoints).getBounds(), {
                        padding: [80, 80],
                        maxZoom: 9
                    });
                }
            };

            // æ›´æ–°è·ç¦»é¢æ¿å‡½æ•° - ç§»é™¤äº†æœ€è¿‘è·ç¦»ç›¸å…³é€»è¾‘
            window.updateDistancePanel = function(v) {
                const distanceInfo = document.getElementById('distanceInfo');
                const macauLat = 22.1987;
                const macauLng = 113.5439;

                if (v === 'A') {
                    const currentPoint = tcPathDataA.find(p => p.type === "current");
                    if (currentPoint) {
                        const distance = calculateDistance(macauLat, macauLng, currentPoint.lat, currentPoint.lng);

                        distanceInfo.innerHTML = `
                            <div>NAMELESS ç•¶å‰ä½ç½®</div>
                            <div class="highlight-text">è·æ¾³é–€ ${distance} å…¬é‡Œ</div>
                        `;
                    } else {
                        distanceInfo.textContent = 'æœªæ‰¾åˆ°ç•¶å‰ä½ç½®æ•¸æ“š';
                    }
                } else if (v === 'B') {
                    const currentPoint = tcPathDataB.find(p => p.type === "current");
                    if (currentPoint) {
                        const distance = calculateDistance(macauLat, macauLng, currentPoint.lat, currentPoint.lng);

                        distanceInfo.innerHTML = `
                            <div>ç†±å¸¶æ°£æ—‹B ç•¶å‰ä½ç½®</div>
                            <div class="highlight-text">è·æ¾³é–€ ${distance} å…¬é‡Œ</div>
                        `;
                    } else {
                        distanceInfo.textContent = 'æœªæ‰¾åˆ°ç•¶å‰ä½ç½®æ•¸æ“š';
                    }
                } else {
                    distanceInfo.textContent = 'è«‹é¸æ“‡ç†±å¸¶æ°£æ—‹æŸ¥çœ‹è·é›¢';
                }
            };

            // åˆå§‹åŒ–æ—¶æ˜¾ç¤ºA
            showTC('A');
            
            // é¸æ“‡æ¡†äº‹ä»¶ç¶å®š
            document.getElementById('tcSelector').addEventListener('change', function() {
                showTC(this.value);
            });

            // é–‹å•Ÿæ»¾è¼ªç¸®æ”¾
            map.scrollWheelZoom.enable();
        });
    </script>
</body>
</html>